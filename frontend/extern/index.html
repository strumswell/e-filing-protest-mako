<!--
=========================================================
Material Kit - v2.0.7
=========================================================

Product Page: https://www.creative-tim.com/product/material-kit
Copyright 2020 Creative Tim (https://www.creative-tim.com/)

Coded by Creative Tim

=========================================================

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="./assets/img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    Versammlung anmelden
  </title>
  <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  <!-- CSS Files -->
  <link href="./assets/css/material-kit.css?v=2.0.7" rel="stylesheet" />
</head>

<body class="index-page sidebar-collapse">
  <nav class="navbar navbar-transparent navbar-color-on-scroll fixed-top navbar-expand-lg" color-on-scroll="100"
    id="sectionsNav">
    <div class="container">
      <div class="navbar-translate">
        <a class="navbar-brand" href="https://demos.creative-tim.com/material-kit/index.html">
          Versammlung </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </div>
  </nav>
  <div class="page-header header-filter clear-filter red-filter" data-parallax="true"
    style="background-image: url('./assets/img/bg2.jpg');">
    <div class="container">
      <div class="row">
        <div class="col-md-8 ml-auto mr-auto">
          <div class="brand">
            <h1>Versammlungsbehörde</h1>
            <h3>Melden Sie jetzt Ihre Versammlung an.</h3>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="main main-raised mb-5">
    <div class="section section-basic">
      <div class="container">
        <div class="title">
          <h2>Melden Sie Ihre Versammlung an</h2>
        </div>
        <div class="row">
          <div class="col-md-6 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Vorname des Leiters</label>
              <input type="text" class="form-control" id="vorname" value="Philipp">
            </div>
          </div>
          <div class="col-md-6 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Nachname des Leiters</label>
              <input type="text" class="form-control" id="nachname" value="Bolte">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Motto</label>
              <input type="text" class="form-control" id="motto" value="Für den Sommer!">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Beginn</label>
              <input type="text" class="form-control" id="beginn" value="2020-07-30 10:00:00">
            </div>
          </div>
          <div class="col-md-6 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Ende</label>
              <input type="text" class="form-control" id="ende" value="2020-07-30 13:00:00">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Route</label>
              <input type="text" class="form-control" id="route" value="Einmal um den TH-Campus">
            </div>
          </div>
          <div class="col-md-4 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Teilnehmerzahl</label>
              <input type="number" class="form-control" id="teilnehmer" value=100>
            </div>
          </div>
          <div class="col-md-4 mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Kontakt</label>
              <input type="text" class="form-control" id="kontakt" value="0176 93547173">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">Hilfsmittel</label>
              <input type="text" class="form-control" id="hilfsmittel" value="Lautsprecherwagen, ...">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col mx-auto text-center">
            <script>
              function createVersammlung() {
                let output = document.getElementById("outputPOST");
                output.value += "Button gedrückt!\n";
                let textVorAnfrage = document.getElementById("textVorAnfragePOST");
                let textNachAnfrage = document.getElementById("textNachAnfragePOST");
                let data = {
                  "vorname": document.getElementById("vorname").value,
                  "nachname": document.getElementById("nachname").value,
                  "motto": document.getElementById("motto").value,
                  "start": document.getElementById("beginn").value,
                  "ende": document.getElementById("ende").value,
                  "route": document.getElementById("route").value,
                  "teilnehmer": document.getElementById("teilnehmer").value,
                  "kontakt": document.getElementById("kontakt").value,
                  "hilfsmittel": document.getElementById("hilfsmittel").value,
                }
                output.value += "Body für Anfrage gebildet: \n" + JSON.stringify(data, null, 4) + "\n";
                output.value += "Setze API-Call ab (POST) mit Body. \n";
                textVorAnfrage.hidden = true;
                fetch('http://localhost:3000/api/v1/versammlung', {
                  method: 'POST', // or 'PUT'
                  headers: {
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data),
                })
                .then(response => response.json())
                .then(data => {
                  console.log('Success:', data);
                  output.value += "Antwort von API: " + data.result.uuid + "\n";
                  textNachAnfrage.innerHTML = "<b>UUID Ihrer Versammlung:</b> " + data.result.uuid
                  textNachAnfrage.hidden = false;
                })
                .catch((error) => {
                  console.error('Error:', error);
                });
              }
            </script>
            <button class="btn btn-danger" onclick="createVersammlung()">Versammlung anmelden</button>
          </div>
        </div>
        <div class="row">
          <div class="col-6 mx-auto">
            <div class="form-group">
              <label for="exampleFormControlTextarea1">Blick hinter den Vorhang</label>
              <textarea class="form-control" id="outputPOST" rows="15" value="" readonly></textarea>
            </div>
          </div>
          <div class="col-6 mx-auto">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Ihre Anfrage</h4>
                <p class= "card-text" id="textVorAnfragePOST">Hier erscheint nach dem Absenden der Anmeldung die UUID, mit der Sie jederzeit den Status Ihrer Anmeldung prüfen können.</p>
                <p class= "card-text" id="textNachAnfragePOST" hidden></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section section-basic">
      <div class="container">
        <div class="title">
          <h2>Prüfen Sie den Status Ihrer Anmeldung</h2>
        </div>
        <div class="row">
          <div class="col mx-auto">
            <div class="form-group">
              <label for="exampleInput1" class="bmd-label-floating">UUID der Anmeldung</label>
              <input type="text" class="form-control" id="uuid" value="c6df20e1-d015-4138-9adc-cde79c15875c">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col mx-auto text-center">
            <div class="form-group">
              <script>
                function getVersammlung() {
                  let uuid = document.getElementById("uuid").value;
                  let output = document.getElementById("outputGET");
                  let textVorAnfrage = document.getElementById("textVorAnfrageGET");
                  let textNachAnfrage = document.getElementById("textNachAnfrageGET");
                  output.value += "Button gedrückt!\n";
                  output.value += "Setze API-Call ab für "+uuid+"\n";
                  fetch('http://localhost:3000/api/v1/versammlung/' + uuid, {
                    method: 'GET',
                    headers: {
                      'Content-Type': 'application/json',
                    }
                  })
                  .then(response => response.json())
                  .then(data => {
                    console.log('Success:', data);
                    output.value += "Antwort von API: \n"+JSON.stringify(data, null, 4)+"\n";
                    textVorAnfrage.hidden = true;
                    textNachAnfrage.innerHTML = "<b>Leiter:</b> " 
                      + data.result.vorname + " " + data.result.nachname + "<br>"
                      + "<b>Motto:</b> " + data.result.motto + "<br>"
                      + "<b>Beginn:</b> " + data.result.start + "<br>"
                      + "<b>Ende:</b> " + data.result.ende + "<br>"
                      + "<b>Status:</b> " + data.result.status;
                    textNachAnfrage.hidden = false;
                  })
                  .catch((error) => {
                    console.error('Error:', error);
                  });
                }
              </script>
              <button class="btn btn-danger" onclick="getVersammlung()">Versammlung abrufen</button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-6 mx-auto">
            <div class="form-group">
              <label for="exampleFormControlTextarea1">Blick hinter den Vorhang</label>
              <textarea class="form-control" id="outputGET" rows="20" value="" readonly></textarea>
            </div>
          </div>
          <div class="col-6 mx-auto">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Ihre Anfrage</h4>
                <p class= "card-text" id="textVorAnfrageGET">Bitte geben Sie eine UUID ein. Sie können dann hier den Status Ihrer Anmeldung sehen.</p>
                <p class= "card-text" id="textNachAnfrageGET" hidden></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer" data-background-color="black">
    <div class="container">
    </div>
  </footer>
  <!--   Core JS Files   -->
  <script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="./assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
  <script src="./assets/js/plugins/moment.min.js"></script>
</body>

</html>